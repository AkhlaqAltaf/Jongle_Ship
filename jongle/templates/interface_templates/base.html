{% comment %} {% load i18n %} {% endcomment %}
{% load static %}
<!doctype html>
<html lang="en">
<head>


    
    
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock title %} | jongle</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/dist/css/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

     <link rel='stylesheet' href='{% static 'css/stylesheet.css' %}' >
    {% block styles %}{% endblock %}
    {% block scripts %}{% endblock %}
   
<style>

    body {
      padding-top: 56px; /* Add padding to body to account for fixed navbar height */
      {% comment %} background-image:url('../static/images/home-page.jpg'); {% endcomment %}
      background-repeat:no-repeat;
      background-size:cover;

    
      
    }

    
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100; 
      
      
      
    }

    .navbar.navbar-expand-lg.navbar-light.bg-light {
        background-color: #000 !important; /* Black background color */
    }

    /* Navbar text color */
    .navbar.navbar-expand-lg.navbar-light.bg-light .navbar-brand,
    .navbar.navbar-expand-lg.navbar-light.bg-light .navbar-nav .nav-link {
        color: #fff !important; /* White text color */
    }

    /* Style the active link */
    .navbar.navbar-expand-lg.navbar-light.bg-light .navbar-nav .nav-item.active .nav-link {
        background-color: #333 !important; /* Darker background color for the active link */
    }

    /* Style the dropdown menu background color and text color */
    .navbar.navbar-expand-lg.navbar-light.bg-light .dropdown-menu {
        background-color: #000 !important; /* Black background color */
    }

    .navbar.navbar-expand-lg.navbar-light.bg-light .dropdown-item {
        color: #fff !important; /* White text color for dropdown items */
    }

    /* Style the notification badge */
    .navbar.navbar-expand-lg.navbar-light.bg-light .fa-bell {
        color: #fff !important; /* White color for the bell icon */
    }

    #notification-badge {
        background-color: red; /* Red background color for the badge */
        color: #fff; /* White text color for the badge */
    }

    /* Add some spacing to the navbar links */
    .navbar.navbar-expand-lg.navbar-light.bg-light .navbar-nav .nav-link {
        margin-right: 20px;
    }
   
    
  </style>



</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

<nav  class="navbar navbar-expand-lg navbar-light bg-light fixed-top ">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">JOONGLE</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="home"><i class="bi bi-house"></i> Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="help"><i class="bi bi-question-circle"></i> Help</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="calculator"><i class="bi bi-calculator"></i> Calculator</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#addressModal"><i class="bi bi-geo-alt"></i> Address</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="store"><i class="bi bi-shop"></i> Store</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="package/packages"><i class="bi bi-box"></i> Packages</a>
                </li>

                
            </ul>

            {% if user.is_authenticated %}
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item ms-auto">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#notificationModal">
                            <i type="button" class="fa fa-bell position-relative ">
                             
                                <span id="notification-badge" class=" top-0 start-100 translate-middle badge rounded-pill">
                                  0
                                  <span class="visually-hidden">unread messages</span>
                                </span>
                            </i>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            {{ user.username }}
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person"></i> {{request.user}}</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person-circle"></i> Profile</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-box"></i> Packages</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-clock-history"></i> History</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="user/logout"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                        </ul>
                    </li>
                </ul>
            {% else %}
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="user/signin"><i class="bi bi-box-arrow-in-right"></i> Sign In</a>
                    </li>
                </ul>
            {% endif %}
        </div>
    </div>
</nav>

{% include 'interface_templates/address_popup.html' %}

{% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show mx-0 my-2" role="alert">
                <strong>{{ message.tags }}!</strong> {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    </div>
{% endif %}

{% block body %}{% endblock %}




<!-- Notification Modal -->
<div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="notificationModalLabel">Notifications</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul id="notification-list">
                    <!-- Notifications will be added here dynamically -->
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button id="read-all-button" type="button" class="btn btn-primary">Read All</button>
            </div>
        </div>
    </div>
</div>






<script>
    document.addEventListener("DOMContentLoaded", function () {

        const notificationBadge = document.getElementById("notification-badge");
        const notificationList = document.getElementById("notification-list");
        const readAllButton = document.getElementById("read-all-button");
        const csrfToken = "{{ csrf_token }}";

        // Function to update the notification badge count
        function updateBadgeCount(count) {
            notificationBadge.textContent = count;
        }

        // Function to update the notifications list
        function updateNotifications(notifications) {
            notificationList.innerHTML = "";
            for (const notification of notifications) {
                const li = document.createElement("li");
                li.textContent = notification.message;

                if (!notification.is_read) {
                    li.classList.add("unread");
                }
                notificationList.appendChild(li);
            }
        }

        // Fetch notifications and update the badge count and list
        function fetchNotifications() {
            fetch("/path/to/fetch/notifications/") // Replace with actual URL
                .then(response => response.json())
                .then(data => {
                    updateBadgeCount(data.unread_count);
                    updateNotifications(data.notifications);
                });
        }

        // Open the notification modal and mark notifications as read
        function showNotificationModal() {
            fetchNotifications();
        }

        function markAsRead() {
            fetch("/path/to/mark/notifications/as/read/", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrfToken,
                },
            }); // Replace with actual URL
            location.reload();
        }

        // Attach a click event to the notification bell icon
        const notificationIcon = document.querySelector(".fa-bell");
        notificationIcon.addEventListener("click", showNotificationModal);

        // Attach a click event to the "Read All" button
        readAllButton.addEventListener("click", markAsRead);

        // Fetch initial notifications
        fetchNotifications();
    });
</script>

</body>

   
</html>
